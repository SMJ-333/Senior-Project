<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exhibition Details - ATHAR Museum</title>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@400;600;700&display=swap"
        rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <style>
        :root {
            --primary-dark: #653025;
            --primary-light: #8d2e1d;
            --accent: #b08d57;
            --accent-light: #d4b483;
            --neutral-light: #f4f1e3;
            --neutral-dark: #4a3c2a;
            --text-dark: #3b2f23;
            --text-light: #7c6f57;
            --white: #fdfaf4;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.15);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            line-height: 1.6;
            color: var(--text-dark);
            background-color: var(--neutral-light);
            overflow-x: hidden;
        }

        h1,
        h2,
        h3,
        h4 {
            font-family: 'Playfair Display', serif;
            font-weight: 700;
            line-height: 1.2;
        }

        nav {
            background: var(--white);
            padding: 1rem 0;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            box-shadow: var(--shadow);
            transition: var(--transition);
        }

        .nav-container {
            max-width: 1300px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 1rem;
        }

        .logo {
            font-family: 'Playfair Display', serif;
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary-dark);
            text-decoration: none;
            display: flex;
            align-items: center;
        }

        .logo::before {
            content: "◈";
            color: var(--accent);
            margin-right: 0.5rem;
            font-size: 1.5rem;
        }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 1.5rem;
        }

        .nav-links a {
            color: var(--text-dark);
            text-decoration: none;
            font-weight: 500;
            transition: var(--transition);
            padding: 0.5rem 1rem;
            border-radius: 4px;
            position: relative;
        }

        .nav-links a::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            width: 0;
            height: 2px;
            background: var(--accent);
            transition: var(--transition);
            transform: translateX(-50%);
        }

        .nav-links a:hover::after,
        .nav-links a.active::after {
            width: 80%;
        }

        .account-icon {
            width: 42px;
            height: 42px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            background: var(--white);
            color: var(--primary-dark);
            font-size: 1.2rem;
            border: 2px solid var(--accent);
            cursor: pointer;
            text-decoration: none;
            transition: var(--transition);
        }

        .account-icon:hover {
            transform: scale(1.08);
            box-shadow: 0 6px 15px rgba(26, 54, 93, 0.25);
        }

        .page-content {
            padding-top: 6rem;
            min-height: 100vh;
        }

        .hero {
            background: linear-gradient(120deg, var(--primary-dark) 0%, var(--primary-light) 100%);
            padding: 6rem 0 4rem;
            text-align: center;
            color: var(--white);
            position: relative;
            overflow: hidden;
        }

        .hero-content {
            max-width: 900px;
            margin: 0 auto;
            padding: 2rem;
            position: relative;
            z-index: 1;
        }

        .hero-content h1 {
            font-size: 3.5rem;
            margin-bottom: 1rem;
        }

        .hero-content p {
            font-size: 1.3rem;
            font-weight: 300;
            opacity: 0.95;
            line-height: 1.8;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 3rem 2rem;
        }

        .exhibition-overview {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 3rem;
            margin-bottom: 4rem;
        }

        .overview-content {
            background: var(--white);
            border-radius: 16px;
            padding: 3rem;
            box-shadow: var(--shadow);
        }

        .overview-content h2 {
            color: var(--primary-dark);
            font-size: 2.2rem;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.8rem;
        }

        .overview-content h2 .material-icons {
            color: var(--accent);
            font-size: 2rem;
        }

        .timeline-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            background: linear-gradient(135deg, var(--accent) 0%, var(--accent-light) 100%);
            color: var(--primary-dark);
            padding: 0.6rem 1.2rem;
            border-radius: 25px;
            font-weight: 600;
            margin-bottom: 1.5rem;
            font-size: 0.95rem;
        }

        .overview-text {
            color: var(--text-dark);
            font-size: 1.05rem;
            line-height: 1.8;
            margin-bottom: 1.5rem;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            margin-top: 2rem;
        }

        .stat-box {
            background: var(--neutral-light);
            padding: 1.2rem;
            border-radius: 12px;
            text-align: center;
            transition: var(--transition);
        }

        .stat-box:hover {
            background: var(--accent-light);
            transform: translateY(-2px);
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary-dark);
            font-family: 'Playfair Display', serif;
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--text-light);
            margin-top: 0.3rem;
        }

        .featured-images {
            background: var(--white);
            border-radius: 16px;
            padding: 2rem;
            box-shadow: var(--shadow);
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .featured-images h3 {
            color: var(--primary-dark);
            font-size: 1.5rem;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .featured-images h3 .material-icons {
            color: var(--accent);
        }

        .featured-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            flex: 1;
        }

        .featured-item {
            position: relative;
            border-radius: 12px;
            overflow: hidden;
            cursor: pointer;
            transition: var(--transition);
            aspect-ratio: 1;
        }

        .featured-item:hover {
            transform: scale(1.03);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        .featured-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .featured-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, rgba(0, 0, 0, 0.8), transparent);
            padding: 1rem;
            color: white;
            font-size: 0.85rem;
            font-weight: 500;
        }

        .featured-action {
            margin-top: 1.5rem;
            text-align: center;
        }

        .themes-section {
            background: var(--white);
            border-radius: 16px;
            padding: 3rem;
            margin-bottom: 3rem;
            box-shadow: var(--shadow);
        }

        .themes-section h2 {
            color: var(--primary-dark);
            font-size: 2rem;
            margin-bottom: 2rem;
            text-align: center;
        }

        .themes-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 1.5rem;
        }

        .theme-card {
            background: linear-gradient(135deg, var(--neutral-light) 0%, #ede8db 100%);
            padding: 1.5rem 1rem;
            border-radius: 12px;
            text-align: center;
            transition: var(--transition);
            border: 2px solid transparent;
        }

        .theme-card:hover {
            border-color: var(--accent);
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
        }

        .theme-title {
            color: var(--primary-dark);
            font-weight: 600;
            font-size: 1rem;
        }

        .theme-count {
            color: var(--accent);
            font-size: 1.5rem;
            font-weight: 700;
            margin-top: 0.5rem;
            font-family: 'Playfair Display', serif;
        }

        .curator-section {
            background: linear-gradient(135deg, #f7f3e9 0%, #ede8db 100%);
            border-radius: 16px;
            padding: 3rem;
            margin-bottom: 3rem;
            border-left: 6px solid var(--accent);
            box-shadow: var(--shadow);
        }

        .curator-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .curator-header .material-icons {
            font-size: 3rem;
            color: var(--accent);
        }

        .curator-header h2 {
            color: var(--primary-dark);
            font-size: 2rem;
        }

        .curator-text {
            color: var(--text-dark);
            font-size: 1.1rem;
            line-height: 1.9;
            font-style: italic;
            padding-left: 2rem;
            border-left: 3px solid var(--accent-light);
        }

        .btn {
            display: inline-flex;
            align-items: center;
            gap: 0.7rem;
            padding: 1rem 2rem;
            border-radius: 10px;
            font-weight: 600;
            text-decoration: none;
            transition: var(--transition);
            cursor: pointer;
            border: none;
            font-size: 1.05rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--accent) 0%, var(--accent-light) 100%);
            color: var(--primary-dark);
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
        }

        .loading {
            text-align: center;
            padding: 3rem;
            color: var(--text-light);
            font-size: 1.1rem;
        }

        .spinner {
            border: 4px solid var(--neutral-light);
            border-top: 4px solid var(--accent);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        .no-results {
            text-align: center;
            padding: 5rem 2rem;
            color: var(--text-light);
        }

        .no-results .material-icons {
            font-size: 5rem;
            margin-bottom: 1.5rem;
            opacity: 0.4;
        }

        footer {
            background: linear-gradient(135deg, var(--primary-dark) 0%, var(--primary-light) 100%);
            color: var(--white);
            padding: 4rem 0 2rem;
            margin-top: 5rem;
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        .footer-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 3rem;
            margin-bottom: 3rem;
        }

        .footer-section h3 {
            color: var(--accent);
            margin-bottom: 1.5rem;
            font-size: 1.3rem;
        }

        .footer-section p {
            margin-bottom: 0.8rem;
            opacity: 0.9;
        }

        .footer-bottom {
            text-align: center;
            padding-top: 2rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            opacity: 0.8;
        }

        @media (max-width: 1024px) {
            .exhibition-overview {
                grid-template-columns: 1fr;
            }

            .featured-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }

            .hero-content h1 {
                font-size: 2.5rem;
            }

            .exhibition-overview {
                gap: 2rem;
            }

            .overview-content,
            .themes-section,
            .curator-section,
            .featured-images {
                padding: 2rem;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .themes-grid {
                grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            }
        }
    </style>
</head>

<body>
    <nav>
        <div class="nav-container">
            <a href="Home.html" class="logo">ATHAR Museum</a>
            <ul class="nav-links">
                <li><a href="Home.html">Home</a></li>
                <li><a href="AboutUs.html">About Us</a></li>
                <li><a href="Events.html">Events</a></li>
                <li><a href="Ticketing.html">Ticketing</a></li>
                <li><a href="News.html">News</a></li>
                <li><a href="Exhibitions.html" class="active">Exhibitions</a></li>
                <li><a href="Gallery.html">Gallery</a></li>
            </ul>
            <a href="Account.html" class="account-icon" title="My Account">
                <span class="material-icons">person</span>
            </a>
        </div>
    </nav>

    <div class="page-content">
        <section class="hero">
            <div class="hero-content">
                <h1 id="exhibition-title">Loading...</h1>
                <p id="exhibition-description">Exploring the collection...</p>
            </div>
        </section>

        <div class="container">
            <div class="exhibition-overview">
                <div class="overview-content">
                    <h2>
                        <span class="material-icons">info</span>
                        About This Exhibition
                    </h2>
                    <div class="timeline-badge">
                        <span class="material-icons" style="font-size: 1.2rem;">schedule</span>
                        <span id="timeline-text">Loading...</span>
                    </div>
                    <p class="overview-text" id="detailed-description">Loading exhibition details...</p>

                    <div class="stats-grid">
                        <div class="stat-box">
                            <div class="stat-number" id="artifact-count">0</div>
                            <div class="stat-label">Artifacts</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-number" id="classification-count">0</div>
                            <div class="stat-label">Categories</div>
                        </div>
                    </div>
                </div>

                <div class="featured-images">
                    <h3>
                        <span class="material-icons">collections</span>
                        Featured Pieces
                    </h3>
                    <div class="featured-grid" id="featured-grid">
                        <div class="loading" style="grid-column: 1 / -1;">
                            <div class="spinner"></div>
                            Loading featured items...
                        </div>
                    </div>
                    <div class="featured-action">
                        <a href="Gallery.html" class="btn btn-primary" id="gallery-link">
                            <span class="material-icons">view_module</span>
                            Explore Full Gallery
                        </a>
                    </div>
                </div>
            </div>

            <div class="themes-section">
                <h2>Artifact Classifications</h2>
                <div id="classifications-loading" class="loading">
                    <div class="spinner"></div>
                    Loading classifications...
                </div>
                <div class="themes-grid" id="themes-grid"></div>
            </div>

            <div class="curator-section">
                <div class="curator-header">
                    <span class="material-icons">format_quote</span>
                    <h2>Curator's Perspective</h2>
                </div>
                <p class="curator-text" id="curator-text">Loading curator's note...</p>
            </div>
        </div>
    </div>

    <footer>
        <div class="footer-content">
            <div class="footer-info">
                <div class="footer-section">
                    <h3>Visit Us</h3>
                    <p>123 Museum Boulevard</p>
                    <p>Cultural District</p>
                    <p>City, State 12345</p>
                    <p>Phone: (555) 123-4567</p>
                </div>
                <div class="footer-section">
                    <h3>Hours</h3>
                    <p>Monday - Friday: 9:00 AM - 6:00 PM</p>
                    <p>Saturday - Sunday: 10:00 AM - 8:00 PM</p>
                    <p>Closed on major holidays</p>
                </div>
                <div class="footer-section">
                    <h3>Admission</h3>
                    <p>Adults: $15</p>
                    <p>Students/Seniors: $12</p>
                    <p>Children under 12: Free</p>
                    <p>Members: Always Free</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 ATHAR Museum. All rights reserved.</p>
            </div>
    </footer>
    </div>

    <script type="module">
        import { db } from './firebase-config.js';
        import { collection, getDocs } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        const exhibitionData = {
            'Arab Heritage': {
                description: 'Discover the golden age of Islamic civilization through calligraphy, manuscripts, and architectural elements that showcase the Arab world\'s contributions to science, literature, and art.',
                detailedDescription: 'The Arab Heritage collection spans over a millennium of cultural achievement, from the early Islamic period through the golden age of the Abbasid Caliphate. These artifacts illuminate the profound impact of Arab scholars, artists, and thinkers on world civilization. From the House of Wisdom in Baghdad to the grand mosques of Damascus and Cairo, Arab culture has been a beacon of learning and artistic excellence.',
                timeline: '7th - 19th Century CE',
                curatorNote: 'This collection showcases the remarkable intellectual and artistic achievements of Arab civilization. From intricate geometric patterns to profound literary works, these pieces remind us that beauty and knowledge have always been intertwined in Islamic culture. The sophistication of Arabic calligraphy, the precision of astronomical instruments, and the elegance of architectural designs all speak to a civilization that valued both aesthetics and intellect.'
            },
            'Persian Heritage': {
                description: 'Journey through the splendor of ancient Persia with exquisite miniature paintings, intricate tilework, and legendary poetry manuscripts from one of history\'s greatest empires.',
                detailedDescription: 'The Persian collection celebrates one of the world\'s oldest continuous civilizations, spanning from the mighty Achaemenid Empire through the artistic zenith of the Safavid dynasty. Persian culture has profoundly influenced art, poetry, and philosophy across vast regions. The miniature paintings reveal stories of legendary heroes and mystical romances, while the tilework demonstrates unparalleled technical mastery.',
                timeline: '550 BCE - 18th Century CE',
                curatorNote: 'Persian art speaks to the soul with its delicate miniatures and profound poetry. Each piece in this collection reflects the Persian devotion to beauty, wisdom, and the celebration of human experience through artistic expression. The works of masters like Rumi and Hafez continue to inspire, while the visual arts demonstrate a culture that saw no separation between the material and the spiritual.'
            },
            'Indian Heritage': {
                description: 'Experience the vibrant colors and spiritual depth of Indian art, from Mughal miniatures to sacred sculptures, textiles, and ceremonial objects spanning millennia.',
                detailedDescription: 'The Indian Heritage collection encompasses the incredible diversity of the subcontinent\'s artistic traditions. From ancient temple sculptures carved in stone to the refined court paintings of the Mughal era, these works reflect India\'s rich spiritual and cultural heritage. The collection includes sacred texts, ceremonial objects, intricate textiles, and devotional art that showcase the region\'s deep philosophical traditions.',
                timeline: '3rd Century BCE - 19th Century CE',
                curatorNote: 'Indian art is characterized by its spiritual depth and vibrant expression. These pieces demonstrate how art and devotion merge seamlessly in Indian culture, creating works that are both beautiful and deeply meaningful. Whether in the serene face of a Buddha statue or the dynamic energy of Hindu deities, Indian art invites contemplation and celebrates the divine in all forms.'
            },
            'Andalusian Heritage': {
                description: 'Step into Al-Andalus, where Islamic, Christian, and Jewish cultures merged to create a unique civilization of tolerance, innovation, and artistic brilliance.',
                detailedDescription: 'The Andalusian collection represents a golden age of cultural synthesis in medieval Iberia. For nearly 800 years, Al-Andalus was a beacon of learning, religious tolerance, and artistic innovation that influenced all of Europe. This period saw remarkable achievements in architecture, philosophy, music, and the sciences. The Great Mosque of Córdoba and the Alhambra palace stand as testaments to this era\'s artistic genius.',
                timeline: '711 - 1492 CE',
                curatorNote: 'Andalusian art represents a unique moment in history when different cultures coexisted and enriched one another. These pieces remind us of the power of cultural exchange and the beauty that emerges from diversity. The geometric patterns, arabesque designs, and muqarnas vaulting showcase a civilization that achieved harmony through difference.'
            },
            'Turkish Heritage': {
                description: 'Witness the grandeur of the Ottoman Empire through imperial treasures, ceramics from Iznik, elaborate textiles, and military regalia that defined an era.',
                detailedDescription: 'The Turkish collection showcases the magnificence of the Ottoman Empire, which ruled for over six centuries as a bridge between East and West. These artifacts reflect the empire\'s sophisticated court culture and artistic patronage. The famous Iznik ceramics, with their vibrant blue and white designs, represent the peak of Ottoman artistic achievement, while elaborate textiles and imperial treasures reveal the wealth and power of the sultans.',
                timeline: '1299 - 1922 CE',
                curatorNote: 'Ottoman art reflects an empire that valued both martial prowess and refined aesthetics. From the famous Iznik ceramics to elaborate textiles, these pieces show how the Ottomans synthesized influences from across their vast territories—Persian, Arab, Byzantine, and European—creating a unique and instantly recognizable artistic tradition.'
            },
            'Others': {
                description: 'Explore diverse collections from cultures across Asia, Africa, and beyond. From ancient trade routes to contemporary cultural exchanges that connect our world.',
                detailedDescription: 'This collection celebrates the diversity of human creativity across regions and time periods. These artifacts demonstrate the interconnectedness of world cultures through trade, migration, and cultural exchange. From the Silk Road to maritime trade routes, these pieces tell stories of how ideas, techniques, and artistic traditions traveled and transformed across continents.',
                timeline: 'Various Periods',
                curatorNote: 'These diverse pieces remind us that every culture has contributed to the rich tapestry of human civilization. Together, they tell stories of connection, innovation, and the universal human impulse to create beauty. Each artifact bridges geographical and temporal distances, revealing our shared humanity.'
            }
        };

        const urlParams = new URLSearchParams(window.location.search);
        let exhibitionName = urlParams.get('exhibition');

        if (exhibitionName) {
            exhibitionName = exhibitionName.trim();
        }

        function updatePageHeader() {
            const data = exhibitionData[exhibitionName] || {};

            document.getElementById('exhibition-title').textContent = exhibitionName || 'Exhibition';
            document.getElementById('exhibition-description').textContent = data.description || 'Explore our curated collection of artifacts.';
            document.getElementById('detailed-description').textContent = data.detailedDescription || data.description || 'Explore our curated collection of artifacts.';
            document.getElementById('timeline-text').textContent = data.timeline || 'Various Periods';
            document.getElementById('curator-text').textContent = data.curatorNote || 'Each piece in this collection has been carefully selected to tell the story of this remarkable culture.';
            document.title = `${exhibitionName} - ATHAR Museum`;

            // Update gallery link
            const galleryLink = document.getElementById('gallery-link');
            galleryLink.href = `Gallery.html?exhibition=${encodeURIComponent(exhibitionName)}&from=ExhibitionDetails`;
        }

        function updateFeaturedImages(artifacts) {
            const featuredGrid = document.getElementById('featured-grid');

            if (artifacts.length === 0) {
                featuredGrid.innerHTML = '<p style="grid-column: 1 / -1; text-align: center; color: var(--text-light);">No featured items available</p>';
                return;
            }

            // Get up to 4 random artifacts for featured display
            const shuffled = [...artifacts].sort(() => 0.5 - Math.random());
            const featured = shuffled.slice(0, 4);

            featuredGrid.innerHTML = featured.map(item => {
                const imageURL = item.imageURL || 'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="200" height="200" viewBox="0 0 200 200"%3E%3Crect fill="%23e2e8f0" width="200" height="200"/%3E%3Ctext x="100" y="100" text-anchor="middle" fill="%23718096" font-size="16"%3ENo Image%3C/text%3E%3C/svg%3E';
                const title = item.title || 'Untitled';
                const currentPage = window.location.pathname.split('/').pop();

                return `
                    <div class="featured-item" onclick="window.location.href='ArtDetails.html?id=${item.id}&from=ExhibitionDetails.html&exhibition=${encodeURIComponent(exhibitionName)}'">
                        <img src="${imageURL}" alt="${title}" onerror="...">
                        <div class="featured-overlay">${title}</div>
                    </div>
                `;
            }).join('');
        }

        function updateClassifications(artifacts) {
            const themesGrid = document.getElementById('themes-grid');
            const classificationsLoading = document.getElementById('classifications-loading');

            // Count artifacts by classification
            const classificationCounts = {};
            artifacts.forEach(item => {
                const classification = item.classification ? item.classification.trim() : 'Unclassified';
                classificationCounts[classification] = (classificationCounts[classification] || 0) + 1;
            });

            // Sort by count (descending)
            const sortedClassifications = Object.entries(classificationCounts)
                .sort((a, b) => b[1] - a[1]);

            classificationsLoading.style.display = 'none';

            if (sortedClassifications.length === 0) {
                themesGrid.innerHTML = '<p style="grid-column: 1 / -1; text-align: center; color: var(--text-light);">No classifications available</p>';
                return;
            }

            themesGrid.innerHTML = sortedClassifications.map(([classification, count]) => `
                <div class="theme-card">
                    <div class="theme-title">${classification}</div>
                    <div class="theme-count">${count}</div>
                </div>
            `).join('');

            // Update classification count in stats
            document.getElementById('classification-count').textContent = sortedClassifications.length;
        }

        async function loadExhibitionData() {
            if (!exhibitionName) {
                console.error('No exhibition specified');
                document.getElementById('exhibition-title').textContent = 'Exhibition Not Found';
                return;
            }

            try {
                updatePageHeader();

                // Load artifacts from the database
                const artifactsCollection = collection(db, 'Museum_Collection');
                const querySnapshot = await getDocs(artifactsCollection);

                const artifacts = [];
                querySnapshot.forEach((doc) => {
                    const data = doc.data();

                    // ✅ Normalize both sides: trim spaces and compare case‑insensitively
                    if (
                        data.Exhibition &&
                        data.Exhibition.trim().toLowerCase() === exhibitionName.trim().toLowerCase()
                    ) {
                        artifacts.push({
                            id: doc.id,
                            ...data
                        });
                    }
                });

                // Update artifact count
                document.getElementById('artifact-count').textContent = artifacts.length;

                // Update featured images
                updateFeaturedImages(artifacts);

                // Update classifications
                updateClassifications(artifacts);

            } catch (error) {
                console.error('Error loading exhibition data:', error);
                document.getElementById('featured-grid').innerHTML =
                    '<p style="grid-column: 1 / -1; text-align: center; color: var(--text-light);">Error loading data</p>';
            }
        }

        // Load data when page loads
        loadExhibitionData()
    </script>
</body>

</html>